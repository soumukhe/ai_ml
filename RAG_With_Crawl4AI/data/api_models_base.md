[ Skip to content ](https://ai.pydantic.dev/api/models/base/<#pydantic_aimodels>)
[ ![logo](https://ai.pydantic.dev/img/logo-white.svg) ](https://ai.pydantic.dev/api/models/base/..> "PydanticAI")
PydanticAI 
pydantic_ai.models 
Initializing search 
[ pydantic/pydantic-ai  ](https://ai.pydantic.dev/api/models/base/<https:/github.com/pydantic/pydantic-ai> "Go to repository")
[ ![logo](https://ai.pydantic.dev/img/logo-white.svg) ](https://ai.pydantic.dev/api/models/base/..> "PydanticAI") PydanticAI 
[ pydantic/pydantic-ai  ](https://ai.pydantic.dev/api/models/base/<https:/github.com/pydantic/pydantic-ai> "Go to repository")
  * [ Introduction  ](https://ai.pydantic.dev/api/models/base/..>)
  * [ Installation  ](https://ai.pydantic.dev/api/models/install/>)
  * [ Getting Help  ](https://ai.pydantic.dev/api/models/help/>)
  * [ Contributing  ](https://ai.pydantic.dev/api/models/contributing/>)
  * [ Troubleshooting  ](https://ai.pydantic.dev/api/models/troubleshooting/>)
  * Documentation  Documentation 
    * [ Agents  ](https://ai.pydantic.dev/api/models/agents/>)
    * [ Models  ](https://ai.pydantic.dev/api/models/models/>)
    * [ Dependencies  ](https://ai.pydantic.dev/api/models/dependencies/>)
    * [ Function Tools  ](https://ai.pydantic.dev/api/models/tools/>)
    * [ Results  ](https://ai.pydantic.dev/api/models/results/>)
    * [ Messages and chat history  ](https://ai.pydantic.dev/api/models/message-history/>)
    * [ Testing and Evals  ](https://ai.pydantic.dev/api/models/testing-evals/>)
    * [ Debugging and Monitoring  ](https://ai.pydantic.dev/api/models/logfire/>)
    * [ Multi-agent Applications  ](https://ai.pydantic.dev/api/models/multi-agent-applications/>)
  * [ Examples  ](https://ai.pydantic.dev/api/models/examples/>)
Examples 
    * [ Pydantic Model  ](https://ai.pydantic.dev/api/models/examples/pydantic-model/>)
    * [ Weather agent  ](https://ai.pydantic.dev/api/models/examples/weather-agent/>)
    * [ Bank support  ](https://ai.pydantic.dev/api/models/examples/bank-support/>)
    * [ SQL Generation  ](https://ai.pydantic.dev/api/models/examples/sql-gen/>)
    * [ Flight booking  ](https://ai.pydantic.dev/api/models/examples/flight-booking/>)
    * [ RAG  ](https://ai.pydantic.dev/api/models/examples/rag/>)
    * [ Stream markdown  ](https://ai.pydantic.dev/api/models/examples/stream-markdown/>)
    * [ Stream whales  ](https://ai.pydantic.dev/api/models/examples/stream-whales/>)
    * [ Chat App with FastAPI  ](https://ai.pydantic.dev/api/models/examples/chat-app/>)
  * API Reference  API Reference 
    * [ pydantic_ai.agent  ](https://ai.pydantic.dev/api/models/base/agent/>)
    * [ pydantic_ai.tools  ](https://ai.pydantic.dev/api/models/base/tools/>)
    * [ pydantic_ai.result  ](https://ai.pydantic.dev/api/models/base/result/>)
    * [ pydantic_ai.messages  ](https://ai.pydantic.dev/api/models/base/messages/>)
    * [ pydantic_ai.exceptions  ](https://ai.pydantic.dev/api/models/base/exceptions/>)
    * [ pydantic_ai.settings  ](https://ai.pydantic.dev/api/models/base/settings/>)
    * [ pydantic_ai.usage  ](https://ai.pydantic.dev/api/models/base/usage/>)
    * [ pydantic_ai.format_as_xml  ](https://ai.pydantic.dev/api/models/base/format_as_xml/>)
    * pydantic_ai.models  [ pydantic_ai.models  ](https://ai.pydantic.dev/api/models/base/<./>) Table of contents 
      * [ models  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models>)
      * [ KnownModelName  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.KnownModelName>)
      * [ Model  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.Model>)
        * [ agent_model  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.Model.agent_model>)
      * [ AgentModel  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel>)
        * [ request  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel.request>)
        * [ request_stream  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel.request_stream>)
      * [ StreamTextResponse  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamTextResponse>)
        * [ __aiter__  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamTextResponse.__aiter__>)
        * [ __anext__  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamTextResponse.__anext__>)
        * [ get  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamTextResponse.get>)
        * [ usage  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamTextResponse.usage>)
        * [ timestamp  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamTextResponse.timestamp>)
      * [ StreamStructuredResponse  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamStructuredResponse>)
        * [ __aiter__  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamStructuredResponse.__aiter__>)
        * [ __anext__  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamStructuredResponse.__anext__>)
        * [ get  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamStructuredResponse.get>)
        * [ usage  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamStructuredResponse.usage>)
        * [ timestamp  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamStructuredResponse.timestamp>)
      * [ ALLOW_MODEL_REQUESTS  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.ALLOW_MODEL_REQUESTS>)
      * [ check_allow_model_requests  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.check_allow_model_requests>)
      * [ override_allow_model_requests  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.override_allow_model_requests>)
    * [ pydantic_ai.models.openai  ](https://ai.pydantic.dev/api/models/base/<../openai/>)
    * [ pydantic_ai.models.anthropic  ](https://ai.pydantic.dev/api/models/base/<../anthropic/>)
    * [ pydantic_ai.models.gemini  ](https://ai.pydantic.dev/api/models/base/<../gemini/>)
    * [ pydantic_ai.models.vertexai  ](https://ai.pydantic.dev/api/models/base/<../vertexai/>)
    * [ pydantic_ai.models.groq  ](https://ai.pydantic.dev/api/models/base/<../groq/>)
    * [ pydantic_ai.models.mistral  ](https://ai.pydantic.dev/api/models/base/<../mistral/>)
    * [ pydantic_ai.models.ollama  ](https://ai.pydantic.dev/api/models/base/<../ollama/>)
    * [ pydantic_ai.models.test  ](https://ai.pydantic.dev/api/models/base/<../test/>)
    * [ pydantic_ai.models.function  ](https://ai.pydantic.dev/api/models/base/<../function/>)


Table of contents 
  * [ models  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models>)
  * [ KnownModelName  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.KnownModelName>)
  * [ Model  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.Model>)
    * [ agent_model  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.Model.agent_model>)
  * [ AgentModel  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel>)
    * [ request  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel.request>)
    * [ request_stream  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel.request_stream>)
  * [ StreamTextResponse  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamTextResponse>)
    * [ __aiter__  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamTextResponse.__aiter__>)
    * [ __anext__  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamTextResponse.__anext__>)
    * [ get  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamTextResponse.get>)
    * [ usage  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamTextResponse.usage>)
    * [ timestamp  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamTextResponse.timestamp>)
  * [ StreamStructuredResponse  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamStructuredResponse>)
    * [ __aiter__  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamStructuredResponse.__aiter__>)
    * [ __anext__  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamStructuredResponse.__anext__>)
    * [ get  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamStructuredResponse.get>)
    * [ usage  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamStructuredResponse.usage>)
    * [ timestamp  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamStructuredResponse.timestamp>)
  * [ ALLOW_MODEL_REQUESTS  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.ALLOW_MODEL_REQUESTS>)
  * [ check_allow_model_requests  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.check_allow_model_requests>)
  * [ override_allow_model_requests  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.override_allow_model_requests>)


  1. [ Introduction  ](https://ai.pydantic.dev/api/models/base/..>)
  2. [ API Reference  ](https://ai.pydantic.dev/api/models/base/agent/>)


# `pydantic_ai.models`
Logic related to making requests to an LLM.
The aim here is to make a common interface for different LLMs, so that the rest of the code can be agnostic to the specific LLM being used.
###  KnownModelName `module-attribute`
```
KnownModelName = Literal[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/typing.html#typing.Literal> "typing.Literal")[
  "openai:gpt-4o",
  "openai:gpt-4o-mini",
  "openai:gpt-4-turbo",
  "openai:gpt-4",
  "openai:o1-preview",
  "openai:o1-mini",
  "openai:o1",
  "openai:gpt-3.5-turbo",
  "groq:llama-3.3-70b-versatile",
  "groq:llama-3.1-70b-versatile",
  "groq:llama3-groq-70b-8192-tool-use-preview",
  "groq:llama3-groq-8b-8192-tool-use-preview",
  "groq:llama-3.1-70b-specdec",
  "groq:llama-3.1-8b-instant",
  "groq:llama-3.2-1b-preview",
  "groq:llama-3.2-3b-preview",
  "groq:llama-3.2-11b-vision-preview",
  "groq:llama-3.2-90b-vision-preview",
  "groq:llama3-70b-8192",
  "groq:llama3-8b-8192",
  "groq:mixtral-8x7b-32768",
  "groq:gemma2-9b-it",
  "groq:gemma-7b-it",
  "google-gla:gemini-1.5-flash",
  "google-gla:gemini-1.5-pro",
  "google-gla:gemini-2.0-flash-exp",
  "google-vertex:gemini-1.5-flash",
  "google-vertex:gemini-1.5-pro",
  "google-vertex:gemini-2.0-flash-exp",
  "mistral:mistral-small-latest",
  "mistral:mistral-large-latest",
  "mistral:codestral-latest",
  "mistral:mistral-moderation-latest",
  "ollama:codellama",
  "ollama:gemma",
  "ollama:gemma2",
  "ollama:llama3",
  "ollama:llama3.1",
  "ollama:llama3.2",
  "ollama:llama3.2-vision",
  "ollama:llama3.3",
  "ollama:mistral",
  "ollama:mistral-nemo",
  "ollama:mixtral",
  "ollama:phi3",
  "ollama:qwq",
  "ollama:qwen",
  "ollama:qwen2",
  "ollama:qwen2.5",
  "ollama:starcoder2",
  "anthropic:claude-3-5-haiku-latest",
  "anthropic:claude-3-5-sonnet-latest",
  "anthropic:claude-3-opus-latest",
  "test",
]

```

Known model names that can be used with the `model` parameter of `Agent`[](https://ai.pydantic.dev/api/models/base/agent/#pydantic_ai.agent.Agent>).
`KnownModelName` is provided as a concise way to specify a model.
###  Model
Bases: `ABC[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/abc.html#abc.ABC> "abc.ABC")`
Abstract class for a model.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
```
| ```
class Model(ABC):
"""Abstract class for a model."""
  @abstractmethod
  async def agent_model(
    self,
    *,
    function_tools: list[ToolDefinition],
    allow_text_result: bool,
    result_tools: list[ToolDefinition],
  ) -> AgentModel:
"""Create an agent model, this is called for each step of an agent run.
    This is async in case slow/async config checks need to be performed that can't be done in `__init__`.
    Args:
      function_tools: The tools available to the agent.
      allow_text_result: Whether a plain text final response/result is permitted.
      result_tools: Tool definitions for the final result tool(s), if any.
    Returns:
      An agent model.
    """
    raise NotImplementedError()
  @abstractmethod
  def name(self) -> str:
    raise NotImplementedError()

```
  
---|---  
####  agent_model `abstractmethod` `async`
```
agent_model(
  *,
  function_tools: list[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#list>)[ToolDefinition[](https://ai.pydantic.dev/api/models/base/tools/#pydantic_ai.tools.ToolDefinition> "pydantic_ai.tools.ToolDefinition")],
  allow_text_result: bool[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/functions.html#bool>),
  result_tools: list[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#list>)[ToolDefinition[](https://ai.pydantic.dev/api/models/base/tools/#pydantic_ai.tools.ToolDefinition> "pydantic_ai.tools.ToolDefinition")]
) -> AgentModel[](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel> "pydantic_ai.models.AgentModel")

```

Create an agent model, this is called for each step of an agent run.
This is async in case slow/async config checks need to be performed that can't be done in `__init__`.
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`function_tools` |  `list[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#list>)[ToolDefinition[](https://ai.pydantic.dev/api/models/base/tools/#pydantic_ai.tools.ToolDefinition> "pydantic_ai.tools.ToolDefinition")]` |  The tools available to the agent. |  _required_  
`allow_text_result` |  `bool[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/functions.html#bool>)` |  Whether a plain text final response/result is permitted. |  _required_  
`result_tools` |  `list[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#list>)[ToolDefinition[](https://ai.pydantic.dev/api/models/base/tools/#pydantic_ai.tools.ToolDefinition> "pydantic_ai.tools.ToolDefinition")]` |  Tool definitions for the final result tool(s), if any. |  _required_  
Returns:
Type | Description  
---|---  
`AgentModel[](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel> "pydantic_ai.models.AgentModel")` |  An agent model.  
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
```
| ```
@abstractmethod
async def agent_model(
  self,
  *,
  function_tools: list[ToolDefinition],
  allow_text_result: bool,
  result_tools: list[ToolDefinition],
) -> AgentModel:
"""Create an agent model, this is called for each step of an agent run.
  This is async in case slow/async config checks need to be performed that can't be done in `__init__`.
  Args:
    function_tools: The tools available to the agent.
    allow_text_result: Whether a plain text final response/result is permitted.
    result_tools: Tool definitions for the final result tool(s), if any.
  Returns:
    An agent model.
  """
  raise NotImplementedError()

```
  
---|---  
###  AgentModel
Bases: `ABC[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/abc.html#abc.ABC> "abc.ABC")`
Model configured for each step of an Agent run.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
```
| ```
class AgentModel(ABC):
"""Model configured for each step of an Agent run."""
  @abstractmethod
  async def request(
    self, messages: list[ModelMessage], model_settings: ModelSettings | None
  ) -> tuple[ModelResponse, Usage]:
"""Make a request to the model."""
    raise NotImplementedError()
  @asynccontextmanager
  async def request_stream(
    self, messages: list[ModelMessage], model_settings: ModelSettings | None
  ) -> AsyncIterator[EitherStreamedResponse]:
"""Make a request to the model and return a streaming response."""
    raise NotImplementedError(f'Streamed requests not supported by this {self.__class__.__name__}')
    # yield is required to make this a generator for type checking
    # noinspection PyUnreachableCode
    yield # pragma: no cover

```
  
---|---  
####  request `abstractmethod` `async`
```
request(
  messages: list[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#list>)[ModelMessage[](https://ai.pydantic.dev/api/models/base/messages/#pydantic_ai.messages.ModelMessage> "pydantic_ai.messages.ModelMessage")],
  model_settings: ModelSettings[](https://ai.pydantic.dev/api/models/base/settings/#pydantic_ai.settings.ModelSettings> "pydantic_ai.settings.ModelSettings") | None,
) -> tuple[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#tuple>)[ModelResponse[](https://ai.pydantic.dev/api/models/base/messages/#pydantic_ai.messages.ModelResponse> "pydantic_ai.messages.ModelResponse"), Usage[](https://ai.pydantic.dev/api/models/base/usage/#pydantic_ai.usage.Usage> "pydantic_ai.result.Usage")]

```

Make a request to the model.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
122
123
124
125
126
127
```
| ```
@abstractmethod
async def request(
  self, messages: list[ModelMessage], model_settings: ModelSettings | None
) -> tuple[ModelResponse, Usage]:
"""Make a request to the model."""
  raise NotImplementedError()

```
  
---|---  
####  request_stream `async`
```
request_stream(
  messages: list[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#list>)[ModelMessage[](https://ai.pydantic.dev/api/models/base/messages/#pydantic_ai.messages.ModelMessage> "pydantic_ai.messages.ModelMessage")],
  model_settings: ModelSettings[](https://ai.pydantic.dev/api/models/base/settings/#pydantic_ai.settings.ModelSettings> "pydantic_ai.settings.ModelSettings") | None,
) -> AsyncIterator[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator> "collections.abc.AsyncIterator")[EitherStreamedResponse]

```

Make a request to the model and return a streaming response.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
129
130
131
132
133
134
135
136
137
```
| ```
@asynccontextmanager
async def request_stream(
  self, messages: list[ModelMessage], model_settings: ModelSettings | None
) -> AsyncIterator[EitherStreamedResponse]:
"""Make a request to the model and return a streaming response."""
  raise NotImplementedError(f'Streamed requests not supported by this {self.__class__.__name__}')
  # yield is required to make this a generator for type checking
  # noinspection PyUnreachableCode
  yield # pragma: no cover

```
  
---|---  
###  StreamTextResponse
Bases: `ABC[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/abc.html#abc.ABC> "abc.ABC")`
Streamed response from an LLM when returning text.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
```
| ```
class StreamTextResponse(ABC):
"""Streamed response from an LLM when returning text."""
  def __aiter__(self) -> AsyncIterator[None]:
"""Stream the response as an async iterable, building up the text as it goes.
    This is an async iterator that yields `None` to avoid doing the work of validating the input and
    extracting the text field when it will often be thrown away.
    """
    return self
  @abstractmethod
  async def __anext__(self) -> None:
"""Process the next chunk of the response, see above for why this returns `None`."""
    raise NotImplementedError()
  @abstractmethod
  def get(self, *, final: bool = False) -> Iterable[str]:
"""Returns an iterable of text since the last call to `get()` — e.g. the text delta.
    Args:
      final: If True, this is the final call, after iteration is complete, the response should be fully validated
        and all text extracted.
    """
    raise NotImplementedError()
  @abstractmethod
  def usage(self) -> Usage:
"""Return the usage of the request.
    NOTE: this won't return the full usage until the stream is finished.
    """
    raise NotImplementedError()
  @abstractmethod
  def timestamp(self) -> datetime:
"""Get the timestamp of the response."""
    raise NotImplementedError()

```
  
---|---  
####  __aiter__
```
__aiter__() -> AsyncIterator[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator> "collections.abc.AsyncIterator")[None]

```

Stream the response as an async iterable, building up the text as it goes.
This is an async iterator that yields `None` to avoid doing the work of validating the input and extracting the text field when it will often be thrown away.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
143
144
145
146
147
148
149
```
| ```
def __aiter__(self) -> AsyncIterator[None]:
"""Stream the response as an async iterable, building up the text as it goes.
  This is an async iterator that yields `None` to avoid doing the work of validating the input and
  extracting the text field when it will often be thrown away.
  """
  return self

```
  
---|---  
####  __anext__ `abstractmethod` `async`
```
__anext__() -> None

```

Process the next chunk of the response, see above for why this returns `None`.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
151
152
153
154
```
| ```
@abstractmethod
async def __anext__(self) -> None:
"""Process the next chunk of the response, see above for why this returns `None`."""
  raise NotImplementedError()

```
  
---|---  
####  get `abstractmethod`
```
get(*, final: bool[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/functions.html#bool>) = False) -> Iterable[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/collections.abc.html#collections.abc.Iterable> "collections.abc.Iterable")[str[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#str>)]

```

Returns an iterable of text since the last call to `get()` — e.g. the text delta.
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`final` |  `bool[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/functions.html#bool>)` |  If True, this is the final call, after iteration is complete, the response should be fully validated and all text extracted. |  `False`  
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
156
157
158
159
160
161
162
163
164
```
| ```
@abstractmethod
def get(self, *, final: bool = False) -> Iterable[str]:
"""Returns an iterable of text since the last call to `get()` — e.g. the text delta.
  Args:
    final: If True, this is the final call, after iteration is complete, the response should be fully validated
      and all text extracted.
  """
  raise NotImplementedError()

```
  
---|---  
####  usage `abstractmethod`
```
usage() -> Usage[](https://ai.pydantic.dev/api/models/base/usage/#pydantic_ai.usage.Usage> "pydantic_ai.result.Usage")

```

Return the usage of the request.
NOTE: this won't return the full usage until the stream is finished.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
166
167
168
169
170
171
172
```
| ```
@abstractmethod
def usage(self) -> Usage:
"""Return the usage of the request.
  NOTE: this won't return the full usage until the stream is finished.
  """
  raise NotImplementedError()

```
  
---|---  
####  timestamp `abstractmethod`
```
timestamp() -> datetime[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/datetime.html#datetime.datetime> "datetime.datetime")

```

Get the timestamp of the response.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
174
175
176
177
```
| ```
@abstractmethod
def timestamp(self) -> datetime:
"""Get the timestamp of the response."""
  raise NotImplementedError()

```
  
---|---  
###  StreamStructuredResponse
Bases: `ABC[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/abc.html#abc.ABC> "abc.ABC")`
Streamed response from an LLM when calling a tool.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
```
| ```
class StreamStructuredResponse(ABC):
"""Streamed response from an LLM when calling a tool."""
  def __aiter__(self) -> AsyncIterator[None]:
"""Stream the response as an async iterable, building up the tool call as it goes.
    This is an async iterator that yields `None` to avoid doing the work of building the final tool call when
    it will often be thrown away.
    """
    return self
  @abstractmethod
  async def __anext__(self) -> None:
"""Process the next chunk of the response, see above for why this returns `None`."""
    raise NotImplementedError()
  @abstractmethod
  def get(self, *, final: bool = False) -> ModelResponse:
"""Get the `ModelResponse` at this point.
    The `ModelResponse` may or may not be complete, depending on whether the stream is finished.
    Args:
      final: If True, this is the final call, after iteration is complete, the response should be fully validated.
    """
    raise NotImplementedError()
  @abstractmethod
  def usage(self) -> Usage:
"""Get the usage of the request.
    NOTE: this won't return the full usage until the stream is finished.
    """
    raise NotImplementedError()
  @abstractmethod
  def timestamp(self) -> datetime:
"""Get the timestamp of the response."""
    raise NotImplementedError()

```
  
---|---  
####  __aiter__
```
__aiter__() -> AsyncIterator[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator> "collections.abc.AsyncIterator")[None]

```

Stream the response as an async iterable, building up the tool call as it goes.
This is an async iterator that yields `None` to avoid doing the work of building the final tool call when it will often be thrown away.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
183
184
185
186
187
188
189
```
| ```
def __aiter__(self) -> AsyncIterator[None]:
"""Stream the response as an async iterable, building up the tool call as it goes.
  This is an async iterator that yields `None` to avoid doing the work of building the final tool call when
  it will often be thrown away.
  """
  return self

```
  
---|---  
####  __anext__ `abstractmethod` `async`
```
__anext__() -> None

```

Process the next chunk of the response, see above for why this returns `None`.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
191
192
193
194
```
| ```
@abstractmethod
async def __anext__(self) -> None:
"""Process the next chunk of the response, see above for why this returns `None`."""
  raise NotImplementedError()

```
  
---|---  
####  get `abstractmethod`
```
get(*, final: bool[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/functions.html#bool>) = False) -> ModelResponse[](https://ai.pydantic.dev/api/models/base/messages/#pydantic_ai.messages.ModelResponse> "pydantic_ai.messages.ModelResponse")

```

Get the `ModelResponse` at this point.
The `ModelResponse` may or may not be complete, depending on whether the stream is finished.
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`final` |  `bool[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/functions.html#bool>)` |  If True, this is the final call, after iteration is complete, the response should be fully validated. |  `False`  
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
196
197
198
199
200
201
202
203
204
205
```
| ```
@abstractmethod
def get(self, *, final: bool = False) -> ModelResponse:
"""Get the `ModelResponse` at this point.
  The `ModelResponse` may or may not be complete, depending on whether the stream is finished.
  Args:
    final: If True, this is the final call, after iteration is complete, the response should be fully validated.
  """
  raise NotImplementedError()

```
  
---|---  
####  usage `abstractmethod`
```
usage() -> Usage[](https://ai.pydantic.dev/api/models/base/usage/#pydantic_ai.usage.Usage> "pydantic_ai.result.Usage")

```

Get the usage of the request.
NOTE: this won't return the full usage until the stream is finished.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
207
208
209
210
211
212
213
```
| ```
@abstractmethod
def usage(self) -> Usage:
"""Get the usage of the request.
  NOTE: this won't return the full usage until the stream is finished.
  """
  raise NotImplementedError()

```
  
---|---  
####  timestamp `abstractmethod`
```
timestamp() -> datetime[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/datetime.html#datetime.datetime> "datetime.datetime")

```

Get the timestamp of the response.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
215
216
217
218
```
| ```
@abstractmethod
def timestamp(self) -> datetime:
"""Get the timestamp of the response."""
  raise NotImplementedError()

```
  
---|---  
###  ALLOW_MODEL_REQUESTS `module-attribute`
```
ALLOW_MODEL_REQUESTS = True

```

Whether to allow requests to models.
This global setting allows you to disable request to most models, e.g. to make sure you don't accidentally make costly requests to a model during tests.
The testing models `TestModel`[](https://ai.pydantic.dev/api/models/base/<../test/#pydantic_ai.models.test.TestModel>) and `FunctionModel`[](https://ai.pydantic.dev/api/models/base/<../function/#pydantic_ai.models.function.FunctionModel>) are no affected by this setting.
###  check_allow_model_requests
```
check_allow_model_requests() -> None

```

Check if model requests are allowed.
If you're defining your own models that have costs or latency associated with their use, you should call this in `Model.agent_model`[](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.Model.agent_model>).
Raises:
Type | Description  
---|---  
`RuntimeError[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/exceptions.html#RuntimeError>)` |  If model requests are not allowed.  
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
235
236
237
238
239
240
241
242
243
244
245
```
| ```
def check_allow_model_requests() -> None:
"""Check if model requests are allowed.
  If you're defining your own models that have costs or latency associated with their use, you should call this in
  [`Model.agent_model`][pydantic_ai.models.Model.agent_model].
  Raises:
    RuntimeError: If model requests are not allowed.
  """
  if not ALLOW_MODEL_REQUESTS:
    raise RuntimeError('Model requests are not allowed, since ALLOW_MODEL_REQUESTS is False')

```
  
---|---  
###  override_allow_model_requests
```
override_allow_model_requests(
  allow_model_requests: bool[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/functions.html#bool>),
) -> Iterator[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/collections.abc.html#collections.abc.Iterator> "collections.abc.Iterator")[None]

```

Context manager to temporarily override `ALLOW_MODEL_REQUESTS`[](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.ALLOW_MODEL_REQUESTS>).
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`allow_model_requests` |  `bool[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/functions.html#bool>)` |  Whether to allow model requests within the context. |  _required_  
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
248
249
250
251
252
253
254
255
256
257
258
259
260
261
```
| ```
@contextmanager
def override_allow_model_requests(allow_model_requests: bool) -> Iterator[None]:
"""Context manager to temporarily override [`ALLOW_MODEL_REQUESTS`][pydantic_ai.models.ALLOW_MODEL_REQUESTS].
  Args:
    allow_model_requests: Whether to allow model requests within the context.
  """
  global ALLOW_MODEL_REQUESTS
  old_value = ALLOW_MODEL_REQUESTS
  ALLOW_MODEL_REQUESTS = allow_model_requests # pyright: ignore[reportConstantRedefinition]
  try:
    yield
  finally:
    ALLOW_MODEL_REQUESTS = old_value # pyright: ignore[reportConstantRedefinition]

```
  
---|---  
© Pydantic Services Inc. 2024 to present 
